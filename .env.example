# Environment variables for Stimm app

# -------------------------------------------------------------------
# General Configuration
# -------------------------------------------------------------------
LOG_LEVEL=INFO


# -------------------------------------------------------------------
# Stimm Application Configuration
# -------------------------------------------------------------------
STIMM_API_URL=http://localhost:8001

# -------------------------------------------------------------------
# LiveKit Configuration
# -------------------------------------------------------------------
LIVEKIT_URL=ws://localhost:7880
LIVEKIT_API_URL=http://localhost:7880
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=secret

# -------------------------------------------------------------------
# Database Configuration
# -------------------------------------------------------------------
DATABASE_URL=postgresql://stimm_user:stimm_password@localhost:5432/stimm

# -------------------------------------------------------------------
# Redis Configuration
# -------------------------------------------------------------------
REDIS_URL=redis://localhost:6379

# -------------------------------------------------------------------
# Frontend Configuration
# -------------------------------------------------------------------
FRONTEND_URL=http://localhost:3000

# STT Provider
# Options: deepgram.com, whisper.local
STT_PROVIDER=whisper.local
#STT_PROVIDER=deepgram.com

# LLM Provider
#LLM_PROVIDER=llama-cpp.local
#LLM_PROVIDER=groq.com
#LLM_PROVIDER=mistral.ai
LLM_PROVIDER=openrouter.ai

# TTS Provider
TTS_PROVIDER=kokoro.local
#TTS_PROVIDER=async.ai
#TTS_PROVIDER=elevenlabs.io

# -------------------------------------------------------------------
# RAG Configuration
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# RAG PROVIDERS
# -------------------------------------------------------------------
# -------------------------------------------------------------------
# Qdrant.local RAG configuration
# -------------------------------------------------------------------
#CUSTOM_QDRANT_URL=http://localhost:6333
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION_NAME=MPR
QDRANT_USE_TLS=false
QDRANT_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
QDRANT_DEFAULT_TOP_K=4
QDRANT_MAX_TOP_K=8
QDRANT_DENSE_CANDIDATE_COUNT=24
QDRANT_LEXICAL_CANDIDATE_COUNT=24
QDRANT_ULTRA_LOW_LATENCY=true


# -------------------------------------------------------------------
# STT PROVIDERS
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Whisper.local STT configuration
# -------------------------------------------------------------------
CUSTOM_WHISPER_STT_URL= ws://localhost:8003/api/stt/stream
CUSTOM_KOKORO_TTS_URL=ws://localhost:8004/ws/tts/stream
CUSTOM_LLAMA_CPP_URL=http://localhost:8002

# -------------------------------------------------------------------
# deepgram.com STT configuration
# -------------------------------------------------------------------
# Required: Your Deepgram STT API key
DEEPGRAM_STT_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Language: fr (French), en (English), es (Spanish), etc.
DEEPGRAM_LANGUAGE=fr
# Model: nova-3 (latest), nova-2 (recommended for French), nova, enhanced, base
DEEPGRAM_MODEL=nova-2

# -------------------------------------------------------------------
# TTS PROVIDERS
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# deepgram.com TTS configuration
# -------------------------------------------------------------------
# Required: Your Deepgram TTS API key
DEEPGRAM_TTS_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Model: aura-asteria-en, aura-luna-en, aura-stella-en, etc.
DEEPGRAM_TTS_MODEL=aura-asteria-en

# -------------------------------------------------------------------
# Elevenlabs.io TTS configuration
# -------------------------------------------------------------------
# Required: Your ElevenLabs TTS API key
ELEVENLABS_TTS_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
ELEVENLABS_TTS_MODEL_ID=eleven_flash_v2_5
ELEVENLABS_TTS_VOICE_ID=coaUpjePVtHIyYmHptQv

# -------------------------------------------------------------------
# Cartesia.ai TTS configuration
# -------------------------------------------------------------------
CARTESIA_TTS_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -------------------------------------------------------------------
# Async.ai TTS configuration
# -------------------------------------------------------------------
ASYNC_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
#ASYNC_AI_TTS_VOICE_ID=e7b694f8-d277-47ff-82bf-cb48e7662647
ASYNC_AI_TTS_VOICE_ID=4941ff0d-6a89-4706-9890-aa93dcee1d54
ASYNC_AI_TTS_MODEL_ID=asyncflow_v2.0

# -------------------------------------------------------------------
# Kokoro.local TTS configuration
# -------------------------------------------------------------------
KOKORO_LOCAL_TTS_URL=ws://localhost:5000/ws/tts/stream
KOKORO_TTS_DEFAULT_VOICE=ff_siwis
KOKORO_TTS_DEFAULT_LANGUAGE=fr-fr

# -------------------------------------------------------------------
# LLM PROVIDERS
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Groq.com LLM configuration
# -------------------------------------------------------------------
GROQ_LLM_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GROQ_LLM_MODEL=llama-3.1-8b-instant

# -------------------------------------------------------------------
# Mistral.ai LLM configuration
# -------------------------------------------------------------------
MISTRAL_LLM_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
MISTRAL_LLM_MODEL=open-mistral-nemo-2407

# -------------------------------------------------------------------
# OpenRouter.ai LLM configuration
# -------------------------------------------------------------------
OPENROUTER_LLM_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OPENROUTER_LLM_MODEL=mistralai/mistral-7b-instruct:free
# Optional tracking headers (can be commented out to reduce latency)
#OPENROUTER_LLM_APP_NAME=Stimm
#OPENROUTER_LLM_APP_URL=https://github.com/EtienneLescot/stimm

# -------------------------------------------------------------------
# Llama.cpp Local LLM configuration
# -------------------------------------------------------------------
#LLAMA_CPP_LLM_API_KEY=  # Optional, not required for local server
LLAMA_CPP_LLM_MODEL=default


# -------------------------------------------------------------------
# TTS Recording Configuration
# -------------------------------------------------------------------
# Enable/disable recording of TTS chunks to disk
TTS_RECORD_CHUNKS=false
TTS_CHUNKS_DIR=/tmp/tts_chunks_web

# -------------------------------------------------------------------
# TTS Buffering Configuration
# -------------------------------------------------------------------
# Options: NONE, LOW, MEDIUM, HIGH
# NONE = no buffering, send tokens immediately
# LOW = buffer until word completion (space) - current behavior
# MEDIUM = buffer until 4 words OR punctuation (.!?;:)
# HIGH = buffer until punctuation (.!?;:)
PRE_TTS_BUFFERING_LEVEL=HIGH


# -------------------------------------------------------------------
# SIP Bridge Configuration
# -------------------------------------------------------------------
# Enable/disable SIP to Agent bridge functionality
ENABLE_SIP_BRIDGE=true

SYSTEM_PROMPT_EXAMPLE="Vous êtes Georges, l'assistant vocale de la Banque Rennaise.\nVous parlez uniquement à l’oral, avec un ton professionnel, calme et naturel.\nRépondez de façon fluide, claire et concise, en moins de 20 secondes.\nNe saluez qu'une seule fois au début de l'appel.\nNe lisez jamais de listes ni de phrases mécaniques : parlez comme une conseillère réelle.\nBasez vos réponses uniquement sur la base de connaissances interne.\nCitez les montants, conditions et procédures exactement comme indiqués dans les documents.\nSi une information est indisponible, indiquez-le poliment sans inventer ni extrapoler.\nPosez uniquement les questions strictement nécessaires à la compréhension ou à l'identification du client.\nÉvitez les répétitions, hésitations ou reformulations inutiles.\nSi la réponse est connue, donnez-la immédiatement sans préambule.\nVotre objectif est d’aider le client efficacement, avec un ton empathique, mesuré et crédible."
